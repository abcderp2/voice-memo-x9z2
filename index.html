<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Voice</title>
<style>
  body { font-size: 16px; padding: 20px; font-family: sans-serif; }
  textarea { width: 100%; height: 150px; font-size: 16px; margin-bottom: 20px; border: 1px solid #ccc; }
  button { width: 100%; padding: 20px; font-size: 18px; background: #007aff; color: white; border: none; border-radius: 8px; font-weight: bold; }
</style>
</head>
<body>

<textarea id="txt">テストです。これが喋れば成功です。</textarea>
<button onclick="speak()">再生 (Play)</button>

<script>
  function speak() {
    // 1. まずエンジンをリセット（iOSで必須の儀式）
    window.speechSynthesis.cancel();

    // 2. テキストを取得
    const text = document.getElementById('txt').value;
    
    // 3. 発話データを作成
    const u = new SpeechSynthesisUtterance(text);
    
    // 4. 設定は「言語」のみ（他は全てOS任せにする）
    u.lang = 'ja-JP'; 
    u.rate = 1.0; // 標準速度
    
    // 5. 声質の指定をしない（これが重要）
    // 特定の声を指定するとエラーになりやすいため、スマホが「一番出しやすい声」を勝手に選ばせる

    // 6. 再生
    window.speechSynthesis.speak(u);
  }
</script>

</body>
</html>
